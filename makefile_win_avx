#############################################################################
# This file is part of sgpp, a program package making use of spatially      #
# adaptive sparse grids to solve numerical problems                         #
#                                                                           #
# Copyright (C) 2010 Alexander Heinecke (Alexander.Heinecke@mytum.de)       #
#                                                                           #
# pysgpp is free software; you can redistribute it and/or modify            #
# it under the terms of the GNU Lesser General Public License as published  #
# by the Free Software Foundation; either version 3 of the License, or      #
# (at your option) any later version.                                       #
#                                                                           #
# pysgpp is distributed in the hope that it will be useful,                 #
# but WITHOUT ANY WARRANTY; without even the implied warranty of            #
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             #
# GNU Lesser General Public License for more details.                       #
#                                                                           #
# You should have received a copy of the GNU Lesser General Public License  #
# along with pysgpp; if not, write to the Free Software                     #
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA #
# or see <http://www.gnu.org/licenses/>.                                    #
#############################################################################

SRCDIR=./../../../src/sgpp
###################################################################
# Default Variables, overwirtten by CLI
###################################################################	
# default compiler: icl; possible values: icl(Intel Compiler)
CC='/cygdrive/c/Program Files (x86)/Intel/Compiler/11.1/060/bin/intel64/icl'

###################################################################
# Compiler Flags
###################################################################	
CFLAGS_ICC=-Wall -c /Qansi-alias /QxAVX /Qunroll /Qstd=c++0x /Qopenmp -O3 -I$(SRCDIR) -DUSEICCINTRINSICS -DWINDOWS -DUSETRONE -DUSEOMP -DUSEOMPTHREE -DUSEAVX
LFLAGS_ICC=-Wall -O3 /Qopenmp

###################################################################
# Builds a lib containing all SG Algorithms
###################################################################	
default:
	mkdir -p tmp/build_native/sgpplib_icc
	make -f ./../../../src/makefileSGppLIB_win --directory=./tmp/build_native/sgpplib_icc "CC=$(CC)" "CFLAGS=$(CFLAGS_ICC)" "LFLAGS=$(LFLAGS_ICC)" "LIBNAME=libsgpp_icc.a"

###################################################################
# Builds a Balck Scholes Solver
###################################################################	
BSSolver: default
	mkdir -p tmp/build_native/BSSolver_icc
	make -f ./../../../src/makefileNativeBlackScholesSolver_win --directory=./tmp/build_native/BSSolver_icc "CC=$(CC)" "CFLAGS=$(CFLAGS_ICC)" "LFLAGS=$(LFLAGS_ICC)" "LIBNAME=libsgpp_icc.a" "BINNAME=BSSolver_ICC.exe"

###################################################################
# Builds a simple Heat Equation Solver
###################################################################	
HESolver: default
	mkdir -p tmp/build_native/HESolver_icc
	make -f ./../../../src/makefileNativeHeatEquationSolver_win --directory=./tmp/build_native/HESolver_icc "CC=$(CC)" "CFLAGS=$(CFLAGS_ICC)" "LFLAGS=$(LFLAGS_ICC)" "LIBNAME=libsgpp_icc.a" "BINNAME=HESolver_ICC.exe"

###################################################################
# Builds a VTuneTest Application
###################################################################	
VTuneTest: default
	mkdir -p tmp/build_native/VTuneTest_icc
	make -f ./../../../src/makefileNativeVTuneTest_win --directory=./tmp/build_native/VTuneTest_icc "CC=$(CC)" "CFLAGS=$(CFLAGS_ICC)" "LFLAGS=$(LFLAGS_ICC)" "LIBNAME=libsgpp_icc.a" "BINNAME=VTuneTest_ICC.exe"
		
clean:
	rm -rdfv tmp/build_native
